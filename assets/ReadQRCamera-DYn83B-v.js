import{c as m,o as p,a as e,_ as w,u as h,r as i,b as k,w as c,v as u,f as R,g as S}from"./index-CQzikroW.js";const I={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:"iconify iconify--mdi",width:"100",height:"100",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},L=["fill"],y={__name:"IconCamera",props:{color:{type:String,default:"black"}},setup(v){const s=v;return(t,n)=>(p(),m("svg",I,[e("path",{fill:s.color,d:"M17,10.5L21,6.5V17.5L17,13.5V17A1,1 0 0,1 16,18H4A1,1 0 0,1 3,17V7A1,1 0 0,1 4,6H16A1,1 0 0,1 17,7V10.5M10.91,9.55L9.2,11.82L10.5,13.55L9.77,14.09L7.73,11.36L5,15H15L10.91,9.55Z"},null,8,L)]))}},C={class:"container"},Q={class:"scanImage full"},V={id:"video"},b={__name:"ReadQRCamera",setup(v){const s=h(),t=i(),n=i(""),l=i(!1),r=i(!0),d=k("imgv");function f(){l.value=!0,t.value=new Instascan.Scanner({video:document.getElementById("video"),captureImage:!0}),t.value&&(Instascan.Camera.getCameras().then(o=>{o.length>0&&t.value.start(o[0])}).catch(()=>{s.setSnack({text:"Ошибка доступа к камере",type:"error"})}),t.value.addListener("scan",(o,a)=>{t.value?(_(),d.value.src=a,n.value=o,s.setSnack({text:"QR код успешно прочитан",type:"info"})):s.setSnack({text:"Ошибка при сканировании QR-кода",type:"error"})}))}function _(){t.value.stop(),r.value=!1}function g(){t.value.stop(),l.value=!l.value,r.value=!0,n.value=""}return(o,a)=>(p(),m("fieldset",C,[a[2]||(a[2]=e("legend",null,"Сканирование QR кода камерой",-1)),c(e("div",{class:"scanImage scanImage--center full",onClick:f},[R(y),a[1]||(a[1]=e("span",null,"сканировать QR-код камерой",-1))],512),[[u,!l.value]]),c(e("div",Q,[c(e("video",V,null,512),[[u,r.value]]),c(e("img",{ref_key:"imgv",ref:d,alt:"qr",id:"image",height:"300px"},null,512),[[u,!r.value]]),c(e("textarea",{"onUpdate:modelValue":a[0]||(a[0]=x=>n.value=x),rows:"2"},null,512),[[S,n.value]]),e("button",{onClick:g,class:"button"},"Сбросить")],512),[[u,l.value]])]))}},B=w(b,[["__scopeId","data-v-ab614be1"]]);export{B as default};
