import{d as _,u as g,c as d,o as f,a as o,_ as k,r as v,b as y,e as R,w as u,f as h,v as p,g as S}from"./index-BcuWUrQc.js";const b=_("request",()=>{async function c(a,i){try{return await(await fetch(a,{method:"POST",body:i})).json()}catch(n){const t=g();return console.log("error",n),t.setSnack({text:"Ошибка сети ",type:"error"}),null}}return{post:c}}),q={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","aria-hidden":"true",role:"img",class:"iconify iconify--mdi",width:"100",height:"100",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Q=["fill"],V={__name:"IconQR",props:{color:{type:String,default:"black"}},setup(c){const a=c;return(i,n)=>(f(),d("svg",q,[o("path",{fill:a.color,d:"M8.5,13.5L11,16.5L14.5,12L19,18H5M21,19V5C21,3.89 20.1,3 19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19Z"},null,8,Q)]))}},L={class:"container"},M={key:0,class:"scanImage full"},$={__name:"ReadQR",setup(c){const a=g(),i=b(),n=v(""),t=v(!1),m=y("img");async function x(r){var e,s;if(console.log("files",r),!r){a.setSnack({text:"Вы не выбрали файл",type:"error"});return}if(/\.(jpe?g|png)$/i.test(r[0].name)){let l=new FormData;l.append("file",r[0]);const w=await i.post("https://api.qrserver.com/v1/read-qr-code/",l);if(n.value=(s=(e=w[0])==null?void 0:e.symbol[0])==null?void 0:s.data,!n.value){a.setSnack({text:"Ошибка при распознавании QR-кода",type:"error"});return}t.value=!0,m.value.src=URL.createObjectURL(r[0]),a.setSnack({text:"QR код успешно прочитан",type:"info"})}else a.setSnack({text:"Вы можете загружать только изображения формата jpeg или png ",type:"error"})}return(r,e)=>(f(),d("fieldset",L,[e[4]||(e[4]=o("legend",null,"Прочитать QR-код из картинки",-1)),t.value?R("",!0):(f(),d("label",M,[h(V),e[3]||(e[3]=o("span",null,"загрузить QR-код",-1)),o("input",{type:"file",name:"qr",accept:"image/*",onInput:e[0]||(e[0]=s=>{var l;return x((l=s==null?void 0:s.target)==null?void 0:l.files)}),hidden:""},null,32)])),u(o("img",{alt:"qr",ref_key:"img",ref:m,height:"150px",class:"full"},null,512),[[p,t.value]]),u(o("textarea",{"onUpdate:modelValue":e[1]||(e[1]=s=>n.value=s),rows:"2",class:"full"},null,512),[[p,t.value],[S,n.value]]),u(o("button",{onClick:e[2]||(e[2]=s=>t.value=!t.value),class:"button full"}," Сбросить ",512),[[p,t.value]])]))}},A=k($,[["__scopeId","data-v-7c64f3ab"]]);export{A as default};
